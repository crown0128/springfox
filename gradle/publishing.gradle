ext {
  artifactRepoBase = 'http://localhost:8081/artifactory'

  releaseRepos = {
    maven {
      name 'jcenter'
//      url "${artifactRepoBase}/oss-${project.version.endsWith('-SNAPSHOT') ? 'snapshot' : 'release'}-local"
      url "${artifactRepoBase}/libs-${project.version.endsWith('-SNAPSHOT') ? 'snapshot' : 'release'}-local"

      credentials {
        username = 'admin'
//        password = project.hasProperty('bintray_key') ? project.getProperty('bintray_key') : ''
        password = 'password'
      }
    }

    //TODO - deploy release versions on bintray
//    if (!project.version.endsWith('-SNAPSHOT')) {
//      maven {
//        name 'bintray'
//        url "https://api.bintray.com/maven/adrianbkelly/maven/${artifactLabel}"
//        credentials {
//          username = 'adrianbkelly'
//          password = project.hasProperty('bintray_key') ? project.getProperty('bintray_key') : ''
//        }
//      }
//    }
  }



  pomConfig = {
    licenses {
      license {
        name "The Apache Software License, Version 2.0"
        url "http://www.apache.org/licenses/LICENSE-2.0.txt"
        distribution "repo"
      }
    }
    developers {
      developer {
        id "yoav"
        name "Yoav Landman"
        email "yoavl@jfrog.com"
      }
    }
  }

//  pom.withXml {
//    def root = asNode()
//    root.appendNode('description', 'A gradle plugin for publishing to Bintray')
//    root.children().last() + pomConfig
//  }


}

task packageSources(type: Jar) {
  classifier = 'sources'
  from sourceSets.main.allSource
}
